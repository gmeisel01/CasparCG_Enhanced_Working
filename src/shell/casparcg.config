<?xml version="1.0" encoding="utf-8"?>

<configuration>
    <paths>
        <media-path>D:\DataVault\media\</media-path>
        <log-path>D:\DataVault\log\</log-path>
        <data-path>D:\DataVault\data\/</data-path>
        <template-path>D:\DataVault\template\</template-path>
    </paths>
    <lock-clear-phrase>secret</lock-clear-phrase>
    <log-level>info</log-level>
    <system-audio>
        <latency-compensation-ms>3</latency-compensation-ms>
        <auto-tune-latency>true</auto-tune-latency>
    </system-audio>
    <portaudio>
        <device-name>FlexASIO</device-name>
        <output-channels>8</output-channels>
        <buffer-size-frames>128</buffer-size-frames>
        <fifo-ms>50</fifo-ms>
    </portaudio>
    <channels>
        <channel>
            <video-mode>1080p2500</video-mode>
            <consumers>
                <screen>
                    <aspect-ratio>1.777</aspect-ratio>
                    <stretch>uniform</stretch>
                    <windowed>true</windowed>
                    <key-only>false</key-only>
                    <vsync>false</vsync>
                    <borderless>false</borderless>
                    <interactive>false</interactive>
                    <always-on-top>true</always-on-top>
                    <x>0</x>
                    <y>0</y>
                    <width>1920</width>
                    <height>1080</height>
                    <sbs-key>false</sbs-key>
                    <colour-space>RGB</colour-space>
                    <force-linear-filter>true</force-linear-filter>
                    <brightness-boost>1.2</brightness-boost>
                    <saturation-boost>1</saturation-boost>
                </screen>
                <portaudio />
            </consumers>
        </channel>
        <channel>
            <video-mode>1080p2500</video-mode>
            <consumers>
                <decklink>
                    <device>1</device>
                    <embedded-audio>true</embedded-audio>
                </decklink>
            </consumers>
        </channel>
    </channels>
    <controllers>
        <tcp>
            <port>5250</port>
            <protocol>AMCP</protocol>
        </tcp>
    </controllers>
    <amcp>
        <media-server>
            <host>localhost</host>
            <port>8000</port>
        </media-server>
    </amcp>
    <osc>
        <default-port>6250</default-port>
        <disable-send-to-amcp-clients>false [true|false]</disable-send-to-amcp-clients>
        <predefined-clients>
            <predefined-client>
                <address>127.0.0.1</address>
                <port>5253</port>
            </predefined-client>
        </predefined-clients>
    </osc>
</configuration>

<!--
<log-level> info  [trace|debug|info|warning|error|fatal]</log-level>
<log-align-columns>true [true|false]</log-align-columns>
<template-hosts>
    <template-host>
        <video-mode />
        <filename />
        <width />
        <height />
    </template-host>
</template-hosts>
<flash>
    <enabled>false [true|false]</enabled>
    <buffer-depth>auto [auto|1..]</buffer-depth>
</flash>
<ffmpeg>
    <producer>
        <auto-deinterlace>interlaced [none|interlaced|all]</auto-deinterlace>
        <threads>4 [1..]</threads>
    </producer>
</ffmpeg>
<html>
    <remote-debugging-port>0 [0|1024-65535]</remote-debugging-port>
    <enable-gpu>false [true|false]</enable-gpu>
	<angle-backend>gl [|gl|d3d11|d3d9]</angle-backend>
    <cache-path>(CEF writes some caches next to the executable, which can fail depending on permissions. This changes it to use another path)</cache-path>
</html>
<system-audio>
    <latency-compensation-ms>40 [0-1000] (milliseconds)</latency-compensation-ms>
    <auto-tune-latency>false [true|false] (automatically measure and adjust latency compensation for optimal audio-video sync)</auto-tune-latency>
    <producer>
        <default-device-name>(empty = system default. Specify OpenAL device name for multi-output systems. See startup logs for available devices)</default-device-name>
    </producer>
</system-audio>
<portaudio>
    <device-name>Realtek ASIO</device-name>
    <output-channels>4</output-channels>
    <buffer-size-frames>128</buffer-size-frames>
    <fifo-ms>50</fifo-ms>
</portaudio>
<ndi>
    <auto-load>false [true|false]</auto-load>
</ndi>
<video-modes>
    <video-mode>
        <id>1024x768p60</id>
        <width>1024</width>
        <height>768</height>
        <time-scale>60000</time-scale>
        <duration>1000</duration>
        <cadence>800</cadence>
    </video-mode>
</video-modes>
<channels>
    <channel>
        <video-mode>PAL [PAL|NTSC|576p2500|720p2398|720p2400|720p2500|720p5000|720p2997|720p5994|720p3000|720p6000|1080p2398|1080p2400|1080i5000|1080i5994|1080i6000|1080p2500|1080p2997|1080p3000|1080p5000|1080p5994|1080p6000|1556p2398|1556p2400|1556p2500|dci1080p2398|dci1080p2400|dci1080p2500|2160p2398|2160p2400|2160p2500|2160p2997|2160p3000|2160p5000|2160p5994|2160p6000|dci2160p2398|dci2160p2400|dci2160p2500] </video-mode>
        <color-depth>8 [8|16]</color-depth>
        <color-space>bt709 [bt709|bt2020]</color-space>
        <consumers>
            <decklink>
                <device>[1..]</device>
                <key-device>device + 1 [1..] (This is only used with the external_separate_device mode)</key-device>
                <embedded-audio>false [true|false]</embedded-audio>
                <latency>normal [normal|low|default]</latency>
                <keyer>external [external|external_separate_device|internal|default]</keyer>
                <key-only>false [true|false]</key-only>
                <buffer-depth>3 [1..]</buffer-depth>
                <video-mode>(Run the decklink at a different video-mode. Note: the framerate must match that of the channel)</video-mode>
                <subregion>
                    <src-x>0 (x offset into the channel)</src-x>
                    <src-y>0 (y offset into the channel)</src-y>
                    <dest-x>0 (x offset of the video onto the output)</dest-x>
                    <dest-y>0 (y offset of the video onto the output)</dest-y>
                    <width>0 (width of the region to copy. 0 means no-limit)</width>
                    <height>0 (height of the region to copy. 0 means no-limit)</height>
                </subregion>
                <color-space> [bt601|bt709|bt2020](default is to follow channel)</color-space>
                <hdr-metadata>
                    <max-cll>1000 [1..65535]</max-cll>
                    <max-fall>1000 [50..65535]</max-fall>
                    <min-dml>0.005 [0.0001-6.5535]</min-dml>
                    <max-dml>1000 [1-65535]</max-dml>
                </hdr-metadata>

                <wait-for-reference>auto [auto|enable|disable]</wait-for-reference>
                <wait-for-reference-duration>10 (seconds)</wait-for-reference-duration>

                <ports>
                    (Add secondary ports to be run in sync with the primary. This allows for splitting a wide channel across multiple decklinks, with sync across the outputs guaranteed by the driver on supported cards)
                    <port>
                        <device>[1..]</device>
                        <key-only>false [true|false]</key-only>
                        <video-mode>(Run the decklink at a different video-mode. Note: the framerate must match that of the channel)</video-mode>
                        <subregion>
                            <src-x>0 (x offset into the channel)</src-x>
                            <src-y>0 (y offset into the channel)</src-y>
                            <dest-x>0 (x offset of the video onto the output)</dest-x>
                            <dest-y>0 (y offset of the video onto the output)</dest-y>
                            <width>0 (width of the region to copy. 0 means no-limit)</width>
                            <height>0 (height of the region to copy. 0 means no-limit)</height>
                        </subregion>
                    </port>
                </ports>
            </decklink>
      	    <bluefish>
                <device>[1..]</device>
		            <sdi-stream>1[1..] </sdi-stream>
                <embedded-audio>false [true|false]</embedded-audio>
                <keyer>disabled [external|internal|disabled] (external only supported on channels 1 and 3, using 3 requires 4 out connectors) ( internal only available on devices with a hardware keyer) </keyer>
                <internal-keyer-audio-source> videooutputchannel [videooutputchannel|sdivideoinput] ( only valid when using internal keyer option) </internal-keyer-audio-source>
                <watchdog>2[0..] ( set to 0 to disable the HW watchdog functionality, otherwise this value indicates how many frames to wait after a crash, before enabling the bypass relay's on the card - only works on sdi-stream 1) </watchdog>
                <uhd-mode>0 [0|1|2|3] (0 = Disable BVC-Multi_Link,  1  = Auto ( ie. BVC-ML gets SQ, Native buffers get 2SI), 2 = Force 2SI output, 3 = Force SQ ie. Square Division output ) this setting only applies in UHD modes. </uhd-mode>
            </bluefish>
            <system-audio>
            </system-audio>
            <screen>
                <name>(Custom name for this screen consumer. Default: "Screen consumer")</name>
                <device>1 [1..]</device>
                <aspect-ratio>1.777 [decimal like "1.777" or fraction like "3840/1080"] (16:9=1.777, 4:3=1.333, 21:9=2.370, 32:9=3.555. If omitted and width/height set, calculated automatically)</aspect-ratio>
                <stretch>fill [none|fill|uniform|uniform_to_fill]</stretch>
                <windowed>true [true|false]</windowed>
                <key-only>false [true|false]</key-only>
                <gpu-texture>false [true|false]</gpu-texture>
                <vsync>false [true|false]</vsync>
                <borderless>false [true|false] (removes window decorations, useful for multi-display spanning)</borderless>
                <interactive>true [true|false] (false hides cursor and prevents window interaction)</interactive>
                <always-on-top>false [true|false] (keeps window above all other windows)</always-on-top>
                <x>0 (windowed: offset from device position. fullscreen with explicit dimensions: absolute screen coordinate for multi-display spanning)</x>
                <y>0 (windowed: offset from device position. fullscreen with explicit dimensions: absolute screen coordinate for multi-display spanning)</y>
                <width>0 (0=auto-calculate. windowed: window size. fullscreen: enables multi-display spanning if set)</width>
                <height>0 (0=auto-calculate. windowed: window size. fullscreen: enables multi-display spanning if set)</height>
                <sbs-key>false [true|false] (side-by-side fill and key output. left half=fill, right half=key. Cannot combine with key-only or datavideo color spaces)</sbs-key>
                <colour-space>RGB [RGB|datavideo-full|datavideo-limited] (RGB=standard, datavideo modes for DataVideo TC-100/TC-200 converters. Cannot combine datavideo with sbs-key or key-only)</colour-space>
                <force-linear-filter>false [true|false] (true=always use GL_LINEAR smooth filtering. false=GL_NEAREST for datavideo modes, GL_LINEAR for RGB. Override texture filtering)</force-linear-filter>
                <enable-mipmaps>false [true|false] (generate mipmap chain for better downscaling quality. Increases memory usage. Not needed for 1:1 or upscaling)</enable-mipmaps>
                <brightness-boost>1.0 [0.0-10.0] (multiply output brightness. 1.0=normal, >1.0=brighter, <1.0=darker. Practical range: 0.5-2.0)</brightness-boost>
                <saturation-boost>1.0 [0.0-10.0] (multiply color saturation. 1.0=normal, >1.0=more vivid, <1.0=less saturated, 0.0=grayscale. Practical range: 0.5-2.0)</saturation-boost>
                <high-quality-chroma>false [true|false] (reserved for future enhanced chroma processing. Currently not implemented)</high-quality-chroma>
            </screen>
            <ndi>
                <name>[custom name]</name>
                <allow-fields>false [true|false]</allow-fields>
            </ndi>
            <ffmpeg>
                <path>[file|url]</path>
                <args>[most ffmpeg arguments related to filtering and output codecs]</args>
            </ffmpeg>
            <artnet>
                <universe>0</universe>

                <host>127.0.0.1</host>
                <port>6454</port>

                <refresh-rate>30</refresh-rate>

                <fixtures>
                    <fixture>
                        <type>RGBW</type>
                        <start-address>1</start-address>
                        <fixture-count>10</fixture-count>
                        <fixture-channels>6</fixture-channels>

                        <x>960</x>
                        <y>540</y>

                        <width>500</width>
                        <height>100</height>

                        <rotation>0</rotation>
                    </fixture>
                </fixtures>
            </artnet>
        </consumers>
        <producers>
            <producer id="0">AMB LOOP</producer>
            <producer id="10">DECKLINK DEVICE 2</producer>
        </producers>
    </channel>
</channels>
<osc>
  <default-port>6250</default-port>
  <disable-send-to-amcp-clients>false [true|false]</disable-send-to-amcp-clients>
  <predefined-clients>
    <predefined-client>
      <address>127.0.0.1</address>
      <port>5253</port>
    </predefined-client>
  </predefined-clients>
</osc>

USAGE NOTES:

PORTAAUDIO
- Provides multi-channel ASIO audio output for professional audio routing.
- Replaces system-audio consumer when multi-channel or ASIO output is required.

- device-name         [string]            Name of the ASIO device to use. Performs fuzzy matching (spaces ignored,
                                          case-insensitive). Leave empty to use system default ASIO device.
- output-channels     [2..64]             Number of output channels. Must not exceed device capability.
- buffer-size-frames  [64,128,256,        ASIO buffer size in frames. Lower values reduce latency but may cause underruns.
                       512,1024]          Common values: 128 (2.7ms @ 48kHz), 256 (5.3ms @ 48kHz).
- fifo-ms             [25..100]           Internal FIFO buffer size in milliseconds. Provides stability between video thread
                                          and audio callbacks. 50ms recommended for most systems.
EXAMPLES:

  <portaudio>
    <device-name>RME Fireface</device-name>
    <output-channels>16</output-channels>
    <buffer-size-frames>128</buffer-size-frames>
    <fifo-ms>50</fifo-ms>
  </portaudio>

SYSTEM-AUDIO:
- latency-compensation-ms: Start with 40ms for standard displays, 150-250ms for LED walls with processing delay
- auto-tune-latency: RECOMMENDED for LED walls - automatically adjusts compensation every 20 seconds based on measured timing
- Audio dispatch is video-scheduled: each audio packet is timed to match its corresponding video frame

SCREEN CONSUMER:
- Multi-display spanning: Use fullscreen mode with explicit x/y/width/height. Example: x=0 y=0 width=7680 height=2160 spans two 4K displays
- Single display fullscreen: Use fullscreen mode WITHOUT explicit dimensions - fills the selected device
- Windowed mode: x/y are offsets from the device's top-left corner
- aspect-ratio: For ultra-wide setups use fraction notation (e.g., "7680/2160" or "3840/1080") for clarity
- borderless + always-on-top: Recommended combination for production LED walls
- brightness-boost/saturation-boost: Applied in shader, useful for display calibration

EXAMPLES:

Ultra-wide LED wall (7680x2160 spanning two 4K displays):
    <device>1</device>
    <x>0</x> <y>0</y>
    <width>7680</width> <height>2160</height>
    <aspect-ratio>7680/2160</aspect-ratio>
    <stretch>fill</stretch>
    <windowed>false</windowed>
    <borderless>true</borderless>
    <always-on-top>true</always-on-top>
    <interactive>false</interactive>
    <brightness-boost>1.2</brightness-boost>

Single 4K display fullscreen:
    <device>2</device>
    <windowed>false</windowed>

Windowed preview on secondary monitor:
    <device>2</device>
    <width>1920</width> <height>1080</height>
    <windowed>true</windowed>
    <interactive>true</interactive>

DataVideo TC-200 output:
    <colour-space>datavideo-limited</colour-space>
    <windowed>false</windowed>

Dual output (separate fill and key):
    Fill: <key-only>false</key-only>
    Key:  <key-only>true</key-only>

Single cable fill+key:
    <sbs-key>true</sbs-key>
-->
